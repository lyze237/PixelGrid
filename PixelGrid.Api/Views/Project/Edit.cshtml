@model PixelGrid.Api.Data.Project

@{
    ViewData["Title"] = "Edit Project";
}

<h1>Edit Project @Model.Name</h1>

<form asp-controller="Project" asp-action="Upload" class="dropzone" id="projectUpload">
    <input type="hidden" name="projectId" value="@Model.Id"/>
    <div class="fallback">
        <input name="file" type="file" multiple/>
    </div>
</form>

<h2>Project Files</h2>
@if (Model.Files.Count > 0)
{
    <table class="table table-striped table-hover">
        <thead>
        <tr>
            <th>@nameof(PixelGrid.Api.Data.File.Path)</th>
            <th>@nameof(PixelGrid.Api.Data.File.Size)</th>
            <th>@nameof(PixelGrid.Api.Data.File.Uploaded)</th>
            <th>Delete</th>
        </tr>
        </thead>
        <tbody>
        @foreach (var file in Model.Files)
        {
            <tr>
                <td><a asp-controller="Project" asp-action="DownloadFile" asp-route-id="@Model.Id" asp-route-fileName="@file.Path" target="_blank">@file.Path</a></td>
                <td>
                    @file.GetBytesReadable()
                </td>
                <td>@file.Uploaded</td>
                <td>
                    <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#projectDeleteFileModal" data-bs-id="@Model.Id" data-bs-name="@Model.Name" data-bs-fileName="@file.Path">Delete</button>
                </td>
            </tr>
        }
        </tbody>
    </table>
}
else
{
    <div class="alert alert-primary">
        You haven't uploaded any files yet.
    </div>
}


<partial name="Components/ProjectDeleteFileModal"/>
